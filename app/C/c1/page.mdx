import QuizQuestion from '../../../components/QuizQuestion';

# Wstęp do C

W tym module nauczysz się tworzyć swój pierwszy program w języku C oraz
wykonywać podstawowe operacje wejścia/wyjścia.

---

## Schemat minimalnego programu

```c
#include <stdio.h>

int main(void) {
    return 0;
}
```

> [!NOTE]
>
> **Standard C (C11/C17/C23) o funkcji `main`:**
>
> - Program _musi_ zawierać funkcję `main`.
> - Dopuszczalne sygnatury:
>
>     ```c
>     int main(void);
>     int main(int argc, char *argv[]);
>     ```
>
> - Typ zwracany musi być `int`.
> - Od C99 pominięcie `return 0;` w `main` jest równoważne z `return 0;`.

---

## `#include` — dołączanie bibliotek

Biblioteki umieszcza się na samej górze pliku źródłowego:

```c
#include <stdio.h>  // biblioteka standardowego wejścia/wyjścia
```

`<stdio.h>` zawiera m.in.:

- `printf`
- `scanf`
- `puts`
- `getchar`
- `putchar`

---

## Funkcja `main`

To funkcja startowa programu:

```c
int main(void) {
    return 0;  // kod zakończenia programu
}
```

Kody wyjścia:

- `0` → sukces
- `1` i inne → błąd

---

## Wypisywanie na ekran — `puts()` i `printf()`

### `puts()` — najprostsza forma wypisywania tekstu

Dodaje automatycznie nową linię:

```c
#include <stdio.h>

int main(void) {
    puts("hello world");
}
```

---

### `printf()` — wypisywanie formatowane

Pozwala wstrzykiwać wartości do tekstu.

```c
printf("Wiek: %d\n", wiek);
```

### Najważniejsze specyfikatory formatu

- `%d` — liczba całkowita (`int`)
- `%i` — liczba całkowita (dziesiętna / ósemkowa / hex)
- `%f` — liczba zmiennoprzecinkowa (`float`/`double`)
- `%.2f` — liczba z dwoma miejscami po przecinku
- `%c` — znak
- `%s` — napis
- `%u` — liczba bez znaku
- `%ld` — `long int`
- `%p` — adres (wskaźnik)

> [!NOTE]
>
> **Standard C:**
>
> - prototyp:
>
>     ```c
>     int printf(const char *restrict format, ...);
>     ```
>
> - nie dodaje `\n`,
> - zwraca liczbę wypisanych znaków.

---

### Przykład:

```c
#include <stdio.h>

int main(void) {
    int wiek = 20;
    float wzrost = 1.82;
    char inicjal = 'A';
    char imie[] = "Jan";

    printf("Imię: %s\n", imie);
    printf("Inicjał: %c\n", inicjal);
    printf("Wiek: %d lat\n", wiek);
    printf("Wzrost: %.2f m\n", wzrost);
}
```

---

## Wczytywanie danych — `scanf()`

`scanf()` służy do pobierania danych z klawiatury według specyfikatora formatu.

### Podstawowy przykład

```c
#include <stdio.h>

int main(void) {
    int wiek;

    printf("Podaj wiek: ");
    scanf("%d", &wiek);  // UWAGA — & !!!!!

    printf("Masz %d lat\n", wiek);
}
```

### Dlaczego `&`?

- `scanf()` musi dostać **adres**, aby zmodyfikować zmienną.
- Wyjątek: napisy (`char[]`) — tablica _jest_ adresem.

O tym, czym są adresy i wskaźniki będzie więcej w kolejnych rozdziałach.

---

## Specyfikatory formatu w `scanf`

- `%d` → `int`
- `%f` → `float`
- `%lf` → `double`
- `%c` → znak
- `%s` → napis (bez &)
- `%u` → `unsigned int`
- `%ld` → `long`
- `%x` → liczba szesnastkowa

> [!NOTE]
>
> **Standard C a `scanf()`:**
>
> - prototyp:
>
>     ```c
>     int scanf(const char *restrict format, ...);
>     ```
>
> - zwraca liczbę poprawnie wczytanych argumentów,
> - w razie błędu zwraca wartość mniejszą od oczekiwanej,
> - przy końcu danych — `EOF`.

---

## Przykład z wieloma wartościami

```c
int a, b;
printf("Podaj dwie liczby: ");
scanf("%d %d", &a, &b);
printf("Suma: %d\n", a + b);
```

---

## Wczytywanie napisów

```c
char imie[20]; // przygotowujemy miejsce na imię - więcej o buforach i stringach w kolejnych rozdziałach

printf("Podaj imię: ");
scanf("%19s", imie); // limitowanie długości — BEZPIECZNIE!

printf("Witaj, %s!\n", imie);
```

> [!NOTE]
>
> `"%19s"` oznacza: maksymalnie 19 znaków + `'\0'`.

---

## Typowy błąd początkujących

```c
scanf("%d", wiek);   // ❌ brak &
```

prowadzi do _nieprzewidywalnych skutków_ (zwykle segfault).

---

## Zadania — sprawdź się

<QuizQuestion
    question="Które deklaracje funkcji main są poprawne według standardu C?"
    multiple={true}
    options={[
        { id: 'a', text: 'void main()', correct: false },
        { id: 'b', text: 'int main(void)', correct: true },
        { id: 'c', text: 'main()', correct: false },
        {
            id: 'd',
            text: 'int main()',
            correct: true,
            explanation:
                'int main() jest równoważne z int main(void) — poprawne.',
        },
    ]}
/>

<QuizQuestion
    question="Co oznacza return 0 w funkcji main?"
    multiple={false}
    options={[
        { id: 'a', text: 'Program zakończył się powodzeniem', correct: true },
        { id: 'b', text: 'Wystąpił błąd', correct: false },
        { id: 'c', text: 'Program nie został uruchomiony', correct: false },
        {
            id: 'd',
            text: 'Brak znaczenia — wartość jest ignorowana',
            correct: false,
        },
    ]}
/>

<QuizQuestion
    question="Które funkcje pochodzą z <stdio.h>?"
    multiple={true}
    options={[
        { id: 'a', text: 'printf', correct: true },
        { id: 'b', text: 'scanf', correct: true },
        { id: 'c', text: 'puts', correct: true },
        { id: 'd', text: 'main', correct: false },
    ]}
/>

---

```c
int x; scanf("%d", ???);
```

<QuizQuestion
    question="Wskaż poprawne użycie scanf"
    multiple={false}
    options={[
        { id: 'a', text: 'x', correct: false },
        {
            id: 'b',
            text: '&x',
            correct: true,
            explanation: 'scanf potrzebuje adresu zmiennej.',
        },
        { id: 'c', text: '*x', correct: false },
        { id: 'd', text: '&*x', correct: false },
    ]}
/>

---

```c
char buf[10];
scanf("%s", buf);
```

<QuizQuestion
    question="Dlaczego to jest niebezpieczne?"
    multiple={false}
    options={[
        { id: 'a', text: 'Bo %s może przepełnić bufor', correct: true },
        { id: 'b', text: 'Bo buf nie istnieje', correct: false },
        { id: 'c', text: 'Bo %s wczytuje tylko cyfry', correct: false },
        { id: 'd', text: 'Bo scanf nie działa z tablicami', correct: false },
    ]}

/>

<br />

```c
#include <stdio.h>

int main(void) {
    puts("hello world");
}
```

<QuizQuestion
    question="Co zrobi powyższy program?"
    multiple={false}
    options={[
        {
            id: 'a',
            text: 'Wypisze hello world i doda nową linię',
            correct: true,
        },
        {
            id: 'b',
            text: 'Wypisze hello world bez nowej linii',
            correct: false,
        },
        { id: 'c', text: 'Nic nie wypisze', correct: false },
        { id: 'd', text: 'Nie skompiluje się', correct: false },
    ]}
/>
